---
import "../styles/global.css"
interface Props {
	title: string;
	lang?: 'ru' | 'en' | 'tk';
}
const { title, lang = 'ru' } = Astro.props;
---

<!doctype html>
<html lang={lang}>
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
			rel="stylesheet"
		/>
		<script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
		<title>{title}</title>
	</head>
	<body class="flex flex-col">
			<slot/>
		<script>
			const translations = {
				ru: {
					"nav.home": "Главная",
					"nav.about": "О нас",
					"nav.portfolio": "Услуги",
					"nav.contact": "Связаться",
					"nav.menu": "Меню",

				"hero.name": "Danny",
				"hero.text": "Мы помогаем улучшить работу в сфере IT: создаём современные решения, автоматизируем процессы и оптимизируем бизнес-процессы для максимальной эффективности.",
				"hero.slogan": "Доверия от вас результат от нас",
					"hero.cta": "Получить консультацию",
					"hero.modal.title": "Записаться на встречу",
					"hero.modal.text": "Выберите удобное время для консультации через Cal.com.",
					"hero.modal.button": "Записаться на встречу в Cal.com",

					"about.title": "О нас",
					"about.text":
						"Мы команда профессионалов, специализирующаяся на веб-дизайне, SEO-оптимизации, онлайн-маркетинге и бизнес-автоматизации. Наша цель — помочь вашему бизнесу расти и развиваться в цифровом пространстве. Мы создаём современные решения, которые работают эффективно и приносят результаты.",

					"contacts.title": "Контакты",
					"contacts.text": "Свяжитесь с нами для получения консультации или обсуждения вашего проекта",
					"contacts.location": "Туркменистан, Мары",
					"contacts.button": "Связаться",
					"contacts.modal.title": "Связаться с нами",
					"contacts.form.firstName": "Имя",
					"contacts.form.lastName": "Фамилия",
					"contacts.form.phone": "Номер телефона",
					"contacts.form.message": "Сообщение",
					"contacts.form.submit": "Отправить",

					"portfolio.title": "Услуги",
					"portfolio.filter.all": "Все",
					"portfolio.filter.web": "Сайты",
					"portfolio.filter.marketing": "Маркетинг",
					"portfolio.filter.automation": "Автоматизация",
					"portfolio.filter.design": "Дизайн",
					"portfolio.filter.dev": "Разработка",
					"portfolio.filter.consult": "Консультации",
					"portfolio.item.web_design.title": "Веб‑дизайн",
					"portfolio.item.web_design.description": "Создаём современные адаптивные сайты с чистым дизайном и удобной структурой, которые работают быстро и продают.",
					"portfolio.item.seo.title": "SEO‑оптимизация",
					"portfolio.item.seo.description": "Анализируем сайт, подбираем ключевые запросы, улучшаем структуру и контент, чтобы вы росли в поиске и получали органический трафик.",
					"portfolio.item.marketing.title": "Онлайн‑маркетинг",
					"portfolio.item.marketing.description": "Строим комплексные рекламные кампании: соцсети, контекст, e‑mail. Помогаем выстроить воронку и сопровождение клиентов.",
					"portfolio.item.automation.title": "Бизнес‑автоматизация",
					"portfolio.item.automation.description": "Автоматизируем рутинные процессы: заявки, отчёты, интеграции с CRM и мессенджерами, чтобы команда тратила меньше времени на ручную работу.",
					"portfolio.item.graphic_design.title": "Графический дизайн",
					"portfolio.item.graphic_design.description": "Разрабатываем бренд‑айдентику, логотипы, визуальные концепции для сайтов и соцсетей в едином стиле.",
					"portfolio.item.print_design.title": "Дизайн печатной продукции",
					"portfolio.item.print_design.description": "Макеты для визиток, буклетов, упаковки, наружной рекламы — готовые к печати файлы с аккуратной типографикой.",
					"portfolio.item.website_design.title": "Разработка дизайна сайта",
					"portfolio.item.website_design.description": "Прорабатываем UX и UI под ваши задачи: прототипы, дизайн‑система, адаптивные макеты и передача в разработку.",
					"portfolio.item.app_development.title": "Разработка приложений",
					"portfolio.item.app_development.description": "Создаём веб‑приложения и личные кабинеты: от MVP до боевых версий с интеграциями и аналитикой.",
					"portfolio.item.code_help.title": "Помощь по коду",
					"portfolio.item.code_help.description": "Помогаем с багами, рефакторингом и оптимизацией существующих проектов, даём рекомендации по архитектуре и стеку.",
					"portfolio.item.consultation.title": "Консультация",
					"portfolio.item.consultation.description": "Разбираем ваш проект, даём понятный план по развитию: от выбора технологий до маркетинга и аналитики.",

					"blog.title": "Мои статьи",
					"blog.more": "Смотреть все",
				},
				en: {
					"nav.home": "Home",
					"nav.about": "About us",
					"nav.portfolio": "Services",
					"nav.contact": "Contact",
					"nav.menu": "Menu",

				"hero.name": "Danny",
				"hero.text": "We help improve work in the IT sector: we create modern solutions, automate processes, and optimize business processes for maximum efficiency.",
				"hero.slogan": "Trust from you, results from us",
					"hero.cta": "Get a consultation",
					"hero.modal.title": "Book a meeting",
					"hero.modal.text": "Choose a convenient time for your consultation via Cal.com.",
					"hero.modal.button": "Book a meeting on Cal.com",

					"about.title": "About us",
					"about.text":
						"We are a team of professionals specializing in web design, SEO optimization, online marketing, and business automation. Our goal is to help your business grow and develop in the digital space. We create modern solutions that work efficiently and deliver results.",

					"contacts.title": "Contacts",
					"contacts.text": "Contact us for a consultation or to discuss your project",
					"contacts.location": "Turkmenistan, Mary",
					"contacts.button": "Contact",
					"contacts.modal.title": "Contact us",
					"contacts.form.firstName": "First name",
					"contacts.form.lastName": "Last name",
					"contacts.form.phone": "Phone number",
					"contacts.form.message": "Message",
					"contacts.form.submit": "Send",

					"portfolio.title": "Services",
					"portfolio.filter.all": "All",
					"portfolio.filter.web": "Websites",
					"portfolio.filter.marketing": "Marketing",
					"portfolio.filter.automation": "Automation",
					"portfolio.filter.design": "Design",
					"portfolio.filter.dev": "Development",
					"portfolio.filter.consult": "Consultations",
					"portfolio.item.web_design.title": "Web Design",
					"portfolio.item.web_design.description": "We create modern responsive websites with clean design and convenient structure that work fast and sell.",
					"portfolio.item.seo.title": "SEO Optimization",
					"portfolio.item.seo.description": "We analyze the site, select key queries, improve structure and content so you grow in search and get organic traffic.",
					"portfolio.item.marketing.title": "Online Marketing",
					"portfolio.item.marketing.description": "We build comprehensive advertising campaigns: social media, context, email. We help build a funnel and customer support.",
					"portfolio.item.automation.title": "Business Automation",
					"portfolio.item.automation.description": "We automate routine processes: applications, reports, integrations with CRM and messengers so the team spends less time on manual work.",
					"portfolio.item.graphic_design.title": "Graphic Design",
					"portfolio.item.graphic_design.description": "We develop brand identity, logos, visual concepts for websites and social networks in a unified style.",
					"portfolio.item.print_design.title": "Print Design",
					"portfolio.item.print_design.description": "Layouts for business cards, brochures, packaging, outdoor advertising - print-ready files with neat typography.",
					"portfolio.item.website_design.title": "Website Design Development",
					"portfolio.item.website_design.description": "We work out UX and UI for your tasks: prototypes, design system, responsive layouts and handover to development.",
					"portfolio.item.app_development.title": "Application Development",
					"portfolio.item.app_development.description": "We create web applications and personal accounts: from MVP to production versions with integrations and analytics.",
					"portfolio.item.code_help.title": "Code Help",
					"portfolio.item.code_help.description": "We help with bugs, refactoring and optimization of existing projects, give recommendations on architecture and stack.",
					"portfolio.item.consultation.title": "Consultation",
					"portfolio.item.consultation.description": "We analyze your project, give a clear development plan: from technology selection to marketing and analytics.",

					"blog.title": "My articles",
					"blog.more": "View more",
				},
				tk: {
					"nav.home": "Baş sahypa",
					"nav.about": "Biz barada",
					"nav.portfolio": "Hyzmatlar",
					"nav.contact": "Aragatnaşyk",
					"nav.menu": "Menýu",

				"hero.name": "Danny",
				"hero.text":
					"IT sektorunda işi gowulaşdyrmaga kömek edýäris: häzirki zaman çözgütlerini döredýäris, prosesleri awtomatlaşdyrýarys we iş proseslerini iň ýokary netijelilik üçin optimizasiýa edýäris.",
				"hero.slogan": "Sizden ynam, bizden netije",
					"hero.cta": "Konsultasiýa almak",
					"hero.modal.title": "Duşuşyk belle",
					"hero.modal.text": "Cal.com arkaly maslahat üçin size laýyk wagty saýlaň.",
					"hero.modal.button": "Cal.com arkaly duşuşyk belle",

					"about.title": "Biz barada",
					"about.text":
						"Biz web-dizaýn, SEO optimizasiýasy, onlaýn marketing we iş awtomatizasiýasy boýunça hünärmenlerden ybarat toparys. Biziň maksadymyz — işiňiziň sanly giňişlikde ösmegi we ösmegi üçin kömek etmekdir. Biz işjeň işleýän we netije berýän häzirki zaman çözgütlerini döredýäris.",

					"contacts.title": "Aragatnaşyk",
					"contacts.text": "Konsultasiýa almak ýa-da taslamanyňyzy çekişmek üçin biz bilen aragatnaşyň",
					"contacts.location": "Türkmenistan, Mary",
					"contacts.button": "Aragatnaşyk",
					"contacts.modal.title": "Biz bilen aragatnaşyň",
					"contacts.form.firstName": "Ady",
					"contacts.form.lastName": "Familiýasy",
					"contacts.form.phone": "Telefon belgisi",
					"contacts.form.message": "Habar",
					"contacts.form.submit": "Ugratmak",

					"portfolio.title": "Hyzmatlar",
					"portfolio.filter.all": "Hemmesi",
					"portfolio.filter.web": "Sahypalar",
					"portfolio.filter.marketing": "Marketing",
					"portfolio.filter.automation": "Awtomatizasiýa",
					"portfolio.filter.design": "Dizaýn",
					"portfolio.filter.dev": "Öndüriş",
					"portfolio.filter.consult": "Maslahatlar",
					"portfolio.item.web_design.title": "Web-dizaýn",
					"portfolio.item.web_design.description": "Çalt işleýän we satýan arassa dizaýnly we amatly gurluşly häzirki zaman adaptiw sahypalary döredýäris.",
					"portfolio.item.seo.title": "SEO optimizasiýasy",
					"portfolio.item.seo.description": "Sahypany analiz edýäris, esasy soraglary saýlaýarys, gurluşy we mazmuny gowulaşdyrýarys, şeýlelik bilen gözlegde ösýärsiňiz we organiki trafik alyarsyňyz.",
					"portfolio.item.marketing.title": "Onlaýn marketing",
					"portfolio.item.marketing.description": "Doly reklama kampaniýalaryny gurýarys: sosial ulgamlar, kontekst, e‑mail. Müşderileriň wokaly we goldawy üçin wokaly gurmaga kömek edýäris.",
					"portfolio.item.automation.title": "Iş awtomatizasiýasy",
					"portfolio.item.automation.description": "Rutin prosesleri awtomatlaşdyrýarys: ýüz tutmalar, hasabatlar, CRM we habarlaşyk programmalary bilen integrasiýalar, şeýlelik bilen toparyň el işi üçin az wagt sarp edýär.",
					"portfolio.item.graphic_design.title": "Grafiki dizaýn",
					"portfolio.item.graphic_design.description": "Brend identikligini, logotipleri, sahypalar we sosial ulgamlar üçin görsel konsepsiýalary birleşdirilen stilde işläp taýýarlaýarys.",
					"portfolio.item.print_design.title": "Çap önümleriniň dizaýny",
					"portfolio.item.print_design.description": "Wizitkalar, bukletler, gaplama, daşarky reklama üçin maketler — çapa taýýar faýllar, düýpli tipografiýa bilen.",
					"portfolio.item.website_design.title": "Sahypanyň dizaýn öndürişi",
					"portfolio.item.website_design.description": "Maksatlaryňyz üçin UX we UI işläp taýýarlaýarys: prototipler, dizaýn ulgamy, adaptiw maketler we öndürişe geçirmek.",
					"portfolio.item.app_development.title": "Programmalaryň öndürişi",
					"portfolio.item.app_development.description": "Web-programmalary we şahsy kabinetleri döredýäris: MVP-den integrasiýalar we analitika bilen öndüriş wersiýalaryna çenli.",
					"portfolio.item.code_help.title": "Kod boýunça kömek",
					"portfolio.item.code_help.description": "Baglaryňyz, refaktoriýa we bar bolan taslamalaryň optimizasiýasy bilen kömek edýäris, arhitektura we stek boýunça maslahatlar berýäris.",
					"portfolio.item.consultation.title": "Maslahat",
					"portfolio.item.consultation.description": "Taslamanyňyzy çözýäris, ösüş boýunça düşnükli meýilnamany berýäris: tehnologiýalary saýlamakdan marketing we analitikä çenli.",

					"blog.title": "Makalalarym",
					"blog.more": "Has köp görmek",
				},
			};

			function applyLang(lang) {
				const dict = translations[lang] || translations.ru;
				document.documentElement.lang = lang;

				document
					.querySelectorAll("[data-i18n-key]")
					.forEach((el) => {
						const element = el as HTMLElement;
						const key = element.dataset.i18nKey;
						if (key && dict[key]) {
							element.textContent = dict[key];
						}
					});

				// Обновляем текст кнопки в hero
				const heroBtn = document.querySelector(".hero .primary.button");
				if (heroBtn && dict["hero.cta"]) {
					heroBtn.textContent = dict["hero.cta"];
				}

				// Обновляем текст фильтров портфолио
				document
					.querySelectorAll(".portfolio__filters .filter")
					.forEach((btn) => {
						const button = btn as HTMLElement;
						const key = button.dataset.i18nKey;
						if (key && dict[key]) {
							button.textContent = dict[key];
						}
					});

				document
					.querySelectorAll("[data-lang-btn]")
					.forEach((btn) => {
						const button = btn as HTMLElement;
						button.classList.toggle(
							"is-active",
							button.dataset.langBtn === lang,
						);
					});

				try {
					window.localStorage.setItem("lang", lang);
				} catch {}
			}

			(function initLang() {
				let initial = "ru";
				try {
					const saved = window.localStorage.getItem("lang");
					if (saved && translations[saved]) {
						initial = saved;
					}
				} catch {}
				applyLang(initial);
			})();

		document.addEventListener("click", (event) => {
			const target = (event.target as HTMLElement)?.closest("[data-lang-btn]") as HTMLElement | null;
			if (!target) return;
			event.preventDefault();
			const lang = target.dataset.langBtn;
			if (lang) {
				applyLang(lang);
			}
		});
		</script>
	</body>
</html>
